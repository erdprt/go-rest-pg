version: '3'
services:
  database:
    build: ./db
    container_name: rest-pg-db
    #restart: always
    volumes:
      - postgresql-volume:$PGDATA
    #- ./db/postgresql.conf:$CUSTOM_CONFIG/postgresql.conf
    #command: 
    #  - postgres -c config_file=$CUSTOM_CONFIG/postgresql.conf
    #  - postgres -c logging_collector=on -c log_directory=/logs
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=admin
      - POSTGRES_DB=rest-pg
      - PGDATA=$PGDATA
      #- PGAUTOCONF=$CUSTOM_CONFIG/postgresql.conf
      
volumes:
  postgresql-volume:
    external: true